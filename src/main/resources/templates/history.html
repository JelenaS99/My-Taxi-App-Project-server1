<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/commons::head}"></head>
<body>
<header th:replace="~{fragments/commons::nav}"></header>
<main>

    <div class="welcome mt-1 mb-4">

        <div class="row mt-1 mb-2">


            <div class="col-12"
                 th:classappend="${#authorization.expression('hasRole(''ADMIN'')')} ? 'col-lg-8' : 'col-lg-10 mx-auto'">
                <div class="home-fields" style="height: 90vh; overflow: auto">
                    <h3 class="my-paintings">TAXI ORDERS</h3>
                    <table class="table">
                        <thead>
                        <tr>
                            <th th:if="${#authorization.expression('hasRole(''ADMIN'')')}">USER</th>
                            <th>FROM</th>
                            <th>TO</th>
                            <th>CAR TYPE</th>
                            <th>PAYMENT METHOD</th>
                            <th>DELETE RIDE</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="my-paintings" th:each="ride : ${rides}">
                            <td th:if="${#authorization.expression('hasRole(''ADMIN'')')}"><span
                                    th:text="${ride.username}"></span></td>
                            <td><span th:text="${ride.beginCity}"></span></td>
                            <td><span th:text="${ride.endCity}"></span></td>
                            <td><span th:text="${ride.car}"></span></td>
                            <td><span th:text="${ride.paymentMethod}"></span></td>
                            <td>
                                <form th:action="@{/delete/{id}(id=${ride.id})}" method="post">
                                    <button type="submit"
                                            style="background:none; border:none; padding:0; cursor:pointer;">
                                        <img class="mr-2" src="/img/remove.png" alt="Remove" title="Remove">
                                    </button>
                                </form>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>


            <div class="col-12 col-lg-4" th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
                <div class="home-fields" style="height: 90vh; overflow: auto">
                    <h3 class="my-paintings">USERS</h3>
                    <table class="table">
                        <thead>
                        <tr>
                            <th>USERS NAME</th>
                            <th>DELETE USER</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="my-paintings" th:each="username : ${users}">
                            <td th:text="${username}"></td>
                            <td>
                                <form th:action="@{/delete/user/{username}(username=${username})}" method="post">
                                    <button type="submit"
                                            style="background:none; border:none; padding:0; cursor:pointer;">
                                        <img class="mr-2" src="/img/remove.png" alt="Remove" title="Remove">
                                    </button>
                                </form>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

    </div>
</main>
<footer th:replace="~{fragments/commons::footer}"></footer>
</body>
</html>
